// -*- Mode: Go; indent-tabs-mode: t -*-
//
// Copyright (C) 2018 IOTech Ltd
//
// SPDX-License-Identifier: Apache-2.0

package mock

import (
	"context"
	"encoding/json"
	"errors"
	"fmt"

	"github.com/edgexfoundry/go-mod-core-contracts/models"
)

const (
	InvalidDeviceId   = "1ef435eb-5060-49b0-8d55-8d4e43239800"
)

var (
	ValidDeviceRandomBoolGenerator            = models.Device{}
	ValidDeviceRandomIntegerGenerator         = models.Device{}
	ValidDeviceRandomUnsignedIntegerGenerator = models.Device{}
	ValidDeviceRandomFloatGenerator           = models.Device{}
	DuplicateDeviceRandomFloatGenerator       = models.Device{}
	NewValidDevice                            = models.Device{}
)

type DeviceClientMock struct{}

func (dc *DeviceClientMock) Add(dev *models.Device, ctx context.Context) (string, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) Delete(id string, ctx context.Context) error {
	panic("implement me")
}

func (dc *DeviceClientMock) DeleteByName(name string, ctx context.Context) error {
	panic("implement me")
}

func (dc *DeviceClientMock) CheckForDevice(token string, ctx context.Context) (models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) Device(id string, ctx context.Context) (models.Device, error) {
	if id == InvalidDeviceId {
		return models.Device{}, fmt.Errorf("invalid id")
	}
	return models.Device{}, nil
}

func (dc *DeviceClientMock) DeviceForName(name string, ctx context.Context) (models.Device, error) {
	var device = models.Device{Id: "5b977c62f37ba10e36673802", Name: name}
	var err error = nil
	if name == "" {
		err = errors.New("Item not found")
	}

	return device, err
}

func (dc *DeviceClientMock) Devices(ctx context.Context) ([]models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) DevicesByLabel(label string, ctx context.Context) ([]models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) DevicesForProfile(profileid string, ctx context.Context) ([]models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) DevicesForProfileByName(profileName string, ctx context.Context) ([]models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) DevicesForService(serviceid string, ctx context.Context) ([]models.Device, error) {
	panic("implement me")
}

func (dc *DeviceClientMock) DevicesForServiceByName(serviceName string, ctx context.Context) ([]models.Device, error) {
	populateDeviceMock()
	return []models.Device{
		ValidDeviceRandomBoolGenerator,
		ValidDeviceRandomIntegerGenerator,
		ValidDeviceRandomUnsignedIntegerGenerator,
		ValidDeviceRandomFloatGenerator,
	}, nil
}

func (dc *DeviceClientMock) Update(dev models.Device, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateAdminState(id string, adminState string, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateAdminStateByName(name string, adminState string, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateLastConnected(id string, time int64, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateLastConnectedByName(name string, time int64, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateLastReported(id string, time int64, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateLastReportedByName(name string, time int64, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateOpState(id string, opState string, ctx context.Context) error {
	return nil
}

func (dc *DeviceClientMock) UpdateOpStateByName(name string, opState string, ctx context.Context) error {
	return nil
}

func populateDeviceMock() {
	deviceDataRandomBoolGenerator := `{"created":1551711642756,"modified":1551711642756,"origin":1551711642745,"description":"Example of Device Virtual","id":"f9bcbc53-5a36-41f5-a749-c8cfdb6bd4a9","name":"Random-Boolean-Generator01","adminState":"UNLOCKED","operatingState":"ENABLED","addressable":{"created":1551711642745,"modified":0,"origin":1551711642745,"id":"6e4c48c7-3fb4-4e47-9f7e-fb20bfdf75a3","name":"Random-Boolean-Generator01","protocol":"OTHER","method":null,"address":"device-virtual-bool-01","port":0,"path":null,"publisher":null,"user":null,"password":null,"topic":null,"baseURL":"OTHER://device-virtual-bool-01:0","url":"OTHER://device-virtual-bool-01:0"},"lastConnected":0,"lastReported":0,"labels":["device-virtual-example"],"location":null,"service":{"created":1551711642565,"modified":1551711642565,"origin":1551711642563,"description":"","id":"9c1bb898-cfd9-46b8-93c6-1d197e50df48","name":"device-virtual","lastConnected":0,"lastReported":0,"operatingState":"ENABLED","labels":[],"addressable":{"created":1551711642549,"modified":0,"origin":1551711642541,"id":"9946109e-2592-478b-9f5a-99c2aaa3683f","name":"device-virtual","protocol":"HTTP","method":"POST","address":"device-virtual","port":49988,"path":"/api/v1/callback","publisher":null,"user":null,"password":null,"topic":null,"baseURL":"HTTP://device-virtual:49988","url":"HTTP://device-virtual:49988/api/v1/callback"},"adminState":"UNLOCKED"},"profile":{"created":1551711642676,"modified":1551711642676,"origin":0,"description":"Example of Device-Virtual","id":"b06e124f-3e46-483d-b18b-fc1f93f835c6","name":"Random-Boolean-Generator","manufacturer":"IOTech","model":"Device-Virtual-01","labels":["device-virtual-example"],"objects":null,"deviceResources":[{"description":"used to decide whether to re-generate a random value","name":"Enable_Randomization","tag":null,"properties":{"value":{"type":"Bool","readWrite":"W","minimum":null,"maximum":null,"defaultValue":"true","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"Random"}},"attributes":null},{"description":"Generate random boolean value","name":"RandomValue_Bool","tag":null,"properties":{"value":{"type":"Bool","readWrite":"R","minimum":"false","maximum":"true","defaultValue":"true","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random bool value"}},"attributes":null}],"resources":[{"name":"RandomValue_Bool","get":[{"index":null,"operation":"get","object":"RandomValue_Bool","property":null,"parameter":"RandomValue_Bool","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"Enable_Randomization","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"RandomValue_Bool","property":null,"parameter":"RandomValue_Bool","resource":"RandomValue_Bool","secondary":[],"mappings":{}}]}],"commands":[{"created":1551711642676,"modified":0,"origin":0,"id":"ed0d88b8-e202-4bdd-a941-606b5c7f40d4","name":"RandomValue_Bool","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Bool","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Bool"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Bool","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Bool","Enable_Randomization"]}}]}}`
	deviceDataRandomIntegerGenerator := `{"created":1551711642770,"modified":1551711642770,"origin":1551711642762,"description":"Example of Device Virtual","id":"5f8f2f75-41bf-4f8a-8397-7421d8009b93","name":"Random-Integer-Generator01","adminState":"UNLOCKED","operatingState":"ENABLED","addressable":{"created":1551711642761,"modified":0,"origin":1551711642761,"id":"90b4ff6a-2049-4810-b43c-ca16cbe7107c","name":"Random-Integer-Generator01","protocol":"OTHER","method":null,"address":"device-virtual-int-01","port":0,"path":null,"publisher":null,"user":null,"password":null,"topic":null,"baseURL":"OTHER://device-virtual-int-01:0","url":"OTHER://device-virtual-int-01:0"},"lastConnected":0,"lastReported":0,"labels":["device-virtual-example"],"location":null,"service":{"created":1551711642565,"modified":1551711642565,"origin":1551711642563,"description":"","id":"7775e6bf-4e44-4166-9224-75749a9a12aa","name":"device-virtual","lastConnected":0,"lastReported":0,"operatingState":"ENABLED","labels":[],"addressable":{"created":1551711642549,"modified":0,"origin":1551711642541,"id":"2262b4f7-52d1-443f-a744-f38c9fe10008","name":"device-virtual","protocol":"HTTP","method":"POST","address":"device-virtual","port":49988,"path":"/api/v1/callback","publisher":null,"user":null,"password":null,"topic":null,"baseURL":"HTTP://device-virtual:49988","url":"HTTP://device-virtual:49988/api/v1/callback"},"adminState":"UNLOCKED"},"profile":{"created":1551711642719,"modified":1551711642719,"origin":0,"description":"Example of Device-Virtual","id":"9a8d1370-1185-47d8-8b30-8542b4604f59","name":"Random-Integer-Generator","manufacturer":"IOTech","model":"Device-Virtual-01","labels":["device-virtual-example"],"objects":null,"deviceResources":[{"description":"used to decide whether to re-generate a random value","name":"Enable_Randomization","tag":null,"properties":{"value":{"type":"Bool","readWrite":"W","minimum":null,"maximum":null,"defaultValue":"true","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"Random"}},"attributes":null},{"description":"Generate random int8 value","name":"RandomValue_Int8","tag":null,"properties":{"value":{"type":"Int8","readWrite":"R","minimum":"-100","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random int8 value"}},"attributes":null},{"description":"Generate random int16 value","name":"RandomValue_Int16","tag":null,"properties":{"value":{"type":"Int16","readWrite":"R","minimum":"-100","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random int16 value"}},"attributes":null},{"description":"Generate random int32 value","name":"RandomValue_Int32","tag":null,"properties":{"value":{"type":"Int32","readWrite":"R","minimum":"-100","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random int32 value"}},"attributes":null},{"description":"Generate random int64 value","name":"RandomValue_Int64","tag":null,"properties":{"value":{"type":"Int64","readWrite":"R","minimum":"-100","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random int64 value"}},"attributes":null}],"resources":[{"name":"RandomValue_Int8","get":[{"index":null,"operation":"get","object":"RandomValue_Int8","property":null,"parameter":"RandomValue_Int8","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Int8","property":null,"parameter":"RandomValue_Int8","resource":"RandomValue_Int8","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Int8","secondary":[],"mappings":{}}]},{"name":"RandomValue_Int16","get":[{"index":null,"operation":"get","object":"RandomValue_Int16","property":null,"parameter":"RandomValue_Int16","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Int16","property":null,"parameter":"RandomValue_Int16","resource":"RandomValue_Int16","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Int16","secondary":[],"mappings":{}}]},{"name":"RandomValue_Int32","get":[{"index":null,"operation":"get","object":"RandomValue_Int32","property":null,"parameter":"RandomValue_Int32","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Int32","property":null,"parameter":"RandomValue_Int32","resource":"RandomValue_Int32","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Int32","secondary":[],"mappings":{}}]},{"name":"RandomValue_Int64","get":[{"index":null,"operation":"get","object":"RandomValue_Int64","property":null,"parameter":"RandomValue_Int64","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Int64","property":null,"parameter":"RandomValue_Int64","resource":"RandomValue_Int64","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Int64","secondary":[],"mappings":{}}]}],"commands":[{"created":1551711642719,"modified":0,"origin":0,"id":"0a718504-245b-40cb-8cf9-bd7332e47a76","name":"RandomValue_Int8","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Int8","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Int8"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Int8","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Int8","Enable_Randomization"]}},{"created":1551711642719,"modified":0,"origin":0,"id":"ed409e91-031b-41e1-8107-8ff176683920","name":"RandomValue_Int16","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Int16","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Int16"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Int16","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Int16","Enable_Randomization"]}},{"created":1551711642719,"modified":0,"origin":0,"id":"0efa9aa5-5ce6-40a1-aba6-dc337b9662c6","name":"RandomValue_Int32","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Int32","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Int32"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Int32","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Int32","Enable_Randomization"]}},{"created":1551711642719,"modified":0,"origin":0,"id":"0f5ec4f6-9454-40dd-85d0-cb52e33a566c","name":"RandomValue_Int64","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Int64","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Int64"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Int64","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Int64","Enable_Randomization"]}}]}}`
	deviceDataRandomUnsignedIntegerGenerator := `{"created":1551711642783,"modified":1551711642783,"origin":1551711642774,"description":"Example of Device Virtual","id":"ae18c544-f4b7-4aa8-851c-792c2031de31","name":"Random-UnsignedInteger-Generator01","adminState":"UNLOCKED","operatingState":"ENABLED","addressable":{"created":1551711642774,"modified":0,"origin":1551711642774,"id":"366acaa0-b0b1-4ff2-9692-51e81c744e0d","name":"Random-UnsignedInteger-Generator01","protocol":"OTHER","method":null,"address":"device-virtual-uint-01","port":0,"path":null,"publisher":null,"user":null,"password":null,"topic":null,"baseURL":"OTHER://device-virtual-uint-01:0","url":"OTHER://device-virtual-uint-01:0"},"lastConnected":0,"lastReported":0,"labels":["device-virtual-example"],"location":null,"service":{"created":1551711642565,"modified":1551711642565,"origin":1551711642563,"description":"","id":"d8b39d48-f13a-4091-9318-b3048a45d919","name":"device-virtual","lastConnected":0,"lastReported":0,"operatingState":"ENABLED","labels":[],"addressable":{"created":1551711642549,"modified":0,"origin":1551711642541,"id":"ae3a7cb0-23b2-4727-9be4-6ed34bba6269","name":"device-virtual","protocol":"HTTP","method":"POST","address":"device-virtual","port":49988,"path":"/api/v1/callback","publisher":null,"user":null,"password":null,"topic":null,"baseURL":"HTTP://device-virtual:49988","url":"HTTP://device-virtual:49988/api/v1/callback"},"adminState":"UNLOCKED"},"profile":{"created":1551711642733,"modified":1551711642733,"origin":0,"description":"Example of Device-Virtual","id":"e436c8e8-0ba4-4257-84b0-1f718cadd33e","name":"Random-UnsignedInteger-Generator","manufacturer":"IOTech","model":"Device-Virtual-01","labels":["device-virtual-example"],"objects":null,"deviceResources":[{"description":"used to decide whether to re-generate a random value","name":"Enable_Randomization","tag":null,"properties":{"value":{"type":"Bool","readWrite":"W","minimum":null,"maximum":null,"defaultValue":"true","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"Random"}},"attributes":null},{"description":"Generate random uint8 value","name":"RandomValue_Uint8","tag":null,"properties":{"value":{"type":"Uint8","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random uint8 value"}},"attributes":null},{"description":"Generate random uint16 value","name":"RandomValue_Uint16","tag":null,"properties":{"value":{"type":"Uint16","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random uint16 value"}},"attributes":null},{"description":"Generate random uint32 value","name":"RandomValue_Uint32","tag":null,"properties":{"value":{"type":"Uint32","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random uint32 value"}},"attributes":null},{"description":"Generate random uint64 value","name":"RandomValue_Uint64","tag":null,"properties":{"value":{"type":"Uint64","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"0","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random uint64 value"}},"attributes":null}],"resources":[{"name":"RandomValue_Uint8","get":[{"index":null,"operation":"get","object":"RandomValue_Uint8","property":null,"parameter":"RandomValue_Uint8","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Uint8","property":null,"parameter":"RandomValue_Uint8","resource":"RandomValue_Uint8","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Uint8","secondary":[],"mappings":{}}]},{"name":"RandomValue_Uint16","get":[{"index":null,"operation":"get","object":"RandomValue_Uint16","property":null,"parameter":"RandomValue_Uint16","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Uint16","property":null,"parameter":"RandomValue_Uint16","resource":"RandomValue_Uint16","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Uint16","secondary":[],"mappings":{}}]},{"name":"RandomValue_Uint32","get":[{"index":null,"operation":"get","object":"RandomValue_Uint32","property":null,"parameter":"RandomValue_Uint32","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Uint32","property":null,"parameter":"RandomValue_Uint32","resource":"RandomValue_Uint32","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Uint32","secondary":[],"mappings":{}}]},{"name":"RandomValue_Uint64","get":[{"index":null,"operation":"get","object":"RandomValue_Uint64","property":null,"parameter":"RandomValue_Uint64","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Uint64","property":null,"parameter":"RandomValue_Uint64","resource":"RandomValue_Uint64","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Uint64","secondary":[],"mappings":{}}]}],"commands":[{"created":1551711642730,"modified":0,"origin":0,"id":"ced85b30-3ef0-45fa-a57e-97108b89ca67","name":"RandomValue_Uint8","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint8","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Uint8"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint8","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Uint8","Enable_Randomization"]}},{"created":1551711642730,"modified":0,"origin":0,"id":"fbc90059-b10d-482d-8cf5-012b35758789","name":"RandomValue_Uint16","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint16","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Uint16"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint16","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Uint16","Enable_Randomization"]}},{"created":1551711642733,"modified":0,"origin":0,"id":"27ac1912-5799-4141-916e-4030c59cc56b","name":"RandomValue_Uint32","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint32","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Uint32"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint32","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Uint32","Enable_Randomization"]}},{"created":1551711642733,"modified":0,"origin":0,"id":"c7a53c56-f563-471e-840c-4e48c59dc362","name":"RandomValue_Uint64","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint64","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Uint64"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Uint64","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Uint64","Enable_Randomization"]}}]}}`
	deviceDataRandomFloatGenerator := `{"created":1551711642791,"modified":1551711642791,"origin":1551711642786,"description":"Example of Device Virtual","id":"af8b1799-dc70-427c-ad95-1b8fad4fca0a","name":"Random-Float-Generator01","adminState":"UNLOCKED","operatingState":"ENABLED","addressable":{"created":1551711642785,"modified":0,"origin":1551711642785,"id":"16dc581e-f79b-4a2e-8859-afd1dd081ac6","name":"Random-Float-Generator01","protocol":"OTHER","method":null,"address":"device-virtual-float-01","port":0,"path":null,"publisher":null,"user":null,"password":null,"topic":null,"baseURL":"OTHER://device-virtual-float-01:0","url":"OTHER://device-virtual-float-01:0"},"lastConnected":0,"lastReported":0,"labels":["device-virtual-example"],"location":null,"service":{"created":1551711642565,"modified":1551711642565,"origin":1551711642563,"description":"","id":"994520b8-1307-4e61-b67e-5091545dad6e","name":"device-virtual","lastConnected":0,"lastReported":0,"operatingState":"ENABLED","labels":[],"addressable":{"created":1551711642549,"modified":0,"origin":1551711642541,"id":"0b6caba6-a16f-4b80-a622-9888caf188e5","name":"device-virtual","protocol":"HTTP","method":"POST","address":"device-virtual","port":49988,"path":"/api/v1/callback","publisher":null,"user":null,"password":null,"topic":null,"baseURL":"HTTP://device-virtual:49988","url":"HTTP://device-virtual:49988/api/v1/callback"},"adminState":"UNLOCKED"},"profile":{"created":1551711642693,"modified":1551711642693,"origin":0,"description":"Example of Device-Virtual","id":"08dc1ab9-a76f-4b61-b177-6fa1c44e6424","name":"Random-Float-Generator","manufacturer":"IOTech","model":"Device-Virtual-01","labels":["device-virtual-example"],"objects":null,"deviceResources":[{"description":"used to decide whether to re-generate a random value","name":"Enable_Randomization","tag":null,"properties":{"value":{"type":"Bool","readWrite":"W","minimum":null,"maximum":null,"defaultValue":"true","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"Random"}},"attributes":null},{"description":"Generate random float32 value","name":"RandomValue_Float32","tag":null,"properties":{"value":{"type":"Float32","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"3.14159","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random float32 value"}},"attributes":null},{"description":"Generate random float64 value","name":"RandomValue_Float64","tag":null,"properties":{"value":{"type":"Float64","readWrite":"R","minimum":"0","maximum":"100","defaultValue":"3.14159265359","size":null,"word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"random float64 value"}},"attributes":null}],"resources":[{"name":"RandomValue_Float32","get":[{"index":null,"operation":"get","object":"RandomValue_Float32","property":null,"parameter":"RandomValue_Float32","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Float32","property":null,"parameter":"RandomValue_Float32","resource":"RandomValue_Float32","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Float32","secondary":[],"mappings":{}}]},{"name":"RandomValue_Float64","get":[{"index":null,"operation":"get","object":"RandomValue_Float64","property":null,"parameter":"RandomValue_Float64","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"RandomValue_Float64","property":null,"parameter":"RandomValue_Float64","resource":"RandomValue_Float64","secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"Enable_Randomization","property":null,"parameter":"Enable_Randomization","resource":"RandomValue_Float64","secondary":[],"mappings":{}}]}],"commands":[{"created":1551711642693,"modified":0,"origin":0,"id":"e724174f-8226-4ad2-a5b6-826ff9bfc851","name":"RandomValue_Float32","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Float32","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Float32"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Float32","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Float32","Enable_Randomization"]}},{"created":1551711642693,"modified":0,"origin":0,"id":"fa2904d9-e7eb-4304-b55c-c66d80f878c1","name":"RandomValue_Float64","get":{"path":"/api/v1/device/{deviceId}/RandomValue_Float64","responses":[{"code":"200","description":null,"expectedValues":["RandomValue_Float64"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RandomValue_Float64","responses":[{"code":"200","description":null,"expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["RandomValue_Float64","Enable_Randomization"]}}]}}`
	newValidDeviceData := `{"created":1552129341782,"modified":1552129341782,"origin":1552129341676,"description":"Auto-generate this virtual device. GS1 AC Drive","id":"37ee8e20-d914-4588-95e6-0088fceb4a99","name":"GS1-AC-Drive01","adminState":"UNLOCKED","operatingState":"ENABLED","addressable":{"created":1552129341674,"modified":0,"origin":1552129341642,"id":"a09cf6c1-427c-4517-bc28-b4cb37df97e3","name":"GS1-AC-Drive01-virtual-addressable","protocol":"OTHER","method":"POST","address":"edgex-device-virtual","port":49990,"path":null,"publisher":null,"user":null,"password":null,"topic":null,"baseURL":"OTHER://edgex-device-virtual:49990","url":"OTHER://edgex-device-virtual:49990"},"lastConnected":0,"lastReported":0,"labels":["modbus","industrial"],"location":null,"service":{"created":1552129332730,"modified":1552129332730,"origin":1552129332645,"description":"","id":"2ce0393b-9814-4bd1-9ea6-3e95140c4b72","name":"edgex-device-virtual","lastConnected":0,"lastReported":0,"operatingState":"ENABLED","labels":["virtual"],"addressable":{"created":1552129332610,"modified":0,"origin":1552129332114,"id":"35fa45f1-f531-4789-b5f6-ec640dc1670c","name":"edgex-device-virtual","protocol":"HTTP","method":"POST","address":"edgex-device-virtual","port":49990,"path":"/api/v1/callback","publisher":null,"user":null,"password":null,"topic":null,"baseURL":"HTTP://edgex-device-virtual:49990","url":"HTTP://edgex-device-virtual:49990/api/v1/callback"},"adminState":"UNLOCKED"},"profile":{"created":1552129341568,"modified":1552129341568,"origin":1552129341469,"description":"GS1 AC Drive","id":"cce09f07-ce9a-40c8-aff4-9b023f09adae","name":"GS1-AC-Drive","manufacturer":"Automation Direct","model":"GS1-10P5","labels":["modbus","industrial"],"objects":null,"deviceResources":[{"description":"Get the OutputVoltage.","name":"HoldingRegister_8455","tag":null,"properties":{"value":{"type":"Float","readWrite":"R","minimum":"0.00","maximum":"300","defaultValue":"0.00","size":"4","word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":"3.2"},"units":{"type":"String","readWrite":"R","defaultValue":"rpm"}},"attributes":{"instance":"8455","type":"doublebyteInt"}},{"description":"Get the RPM.","name":"HoldingRegister_8454","tag":null,"properties":{"value":{"type":"Float","readWrite":"R","minimum":"0.00","maximum":"300","defaultValue":"0.00","size":"4","word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":"3.2"},"units":{"type":"String","readWrite":"R","defaultValue":"Volts"}},"attributes":{"instance":"8454","type":"doublebyteInt"}},{"description":"The status of the device.","name":"HoldingRegister_2331","tag":null,"properties":{"value":{"type":"Boolean","readWrite":"R","minimum":null,"maximum":null,"defaultValue":"false","size":"1","word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"OFF"}},"attributes":{"instance":"8454","type":"doublebyteInt"}},{"description":"whether generating random value in each collection cycle","name":"enableRandomization","tag":null,"properties":{"value":{"type":"Boolean","readWrite":"W","minimum":null,"maximum":null,"defaultValue":"true","size":"1","word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":null},"units":{"type":"String","readWrite":"R","defaultValue":"Random"}},"attributes":null},{"description":"the frequency of collection","name":"collectionFrequency","tag":null,"properties":{"value":{"type":"Integer","readWrite":"W","minimum":"0","maximum":"600","defaultValue":"15","size":"4","word":"2","lsb":null,"mask":"0x00","shift":"0","scale":"1.0","offset":"0.0","base":"0","assertion":null,"signed":true,"precision":"3"},"units":{"type":"String","readWrite":"R","defaultValue":"Seconds"}},"attributes":null}],"resources":[{"name":"OutputVoltage","get":[{"index":null,"operation":"get","object":"HoldingRegister_8455","property":"value","parameter":"OutputVoltage","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"enableRandomization","property":"value","parameter":"enableRandomization","resource":null,"secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"collectionFrequency","property":"value","parameter":"collectionFrequency","resource":null,"secondary":[],"mappings":{}}]},{"name":"RPM","get":[{"index":null,"operation":"get","object":"HoldingRegister_8454","property":"value","parameter":"RPM","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"enableRandomization","property":"value","parameter":"enableRandomization","resource":null,"secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"collectionFrequency","property":"value","parameter":"collectionFrequency","resource":null,"secondary":[],"mappings":{}}]},{"name":"Status","get":[{"index":null,"operation":"get","object":"HoldingRegister_2331","property":"value","parameter":"Status","resource":null,"secondary":[],"mappings":{}}],"set":[{"index":null,"operation":"set","object":"enableRandomization","property":"value","parameter":"enableRandomization","resource":null,"secondary":[],"mappings":{}},{"index":null,"operation":"set","object":"collectionFrequency","property":"value","parameter":"collectionFrequency","resource":null,"secondary":[],"mappings":{}}]}],"commands":[{"created":1552129341567,"modified":0,"origin":0,"id":"21548fad-69ff-4671-8f4b-3a7d5ab18dec","name":"OutputVoltage","get":{"path":"/api/v1/device/{deviceId}/OutputVoltage","responses":[{"code":"200","description":null,"expectedValues":["HoldingRegister_8455"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/OutputVoltage","responses":[{"code":"204","description":"valid and accepted","expectedValues":[]},{"code":"400","description":"bad request","expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["enableRandomization","collectionFrequency"]}},{"created":1552129341568,"modified":0,"origin":0,"id":"67360b6e-b426-443d-b53c-6490237456e4","name":"Status","get":{"path":"/api/v1/device/{deviceId}/Status","responses":[{"code":"200","description":null,"expectedValues":["HoldingRegister_2331"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/Status","responses":[{"code":"204","description":"valid and accepted","expectedValues":[]},{"code":"400","description":"bad request","expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["enableRandomization","collectionFrequency"]}},{"created":1552129341568,"modified":0,"origin":0,"id":"3d81d381-5055-4928-a8bf-d120d646a2c2","name":"RPM","get":{"path":"/api/v1/device/{deviceId}/RPM","responses":[{"code":"200","description":null,"expectedValues":["HoldingRegister_8454"]},{"code":"503","description":"service unavailable","expectedValues":[]}]},"put":{"path":"/api/v1/device/{deviceId}/RPM","responses":[{"code":"204","description":"valid and accepted","expectedValues":[]},{"code":"400","description":"bad request","expectedValues":[]},{"code":"503","description":"service unavailable","expectedValues":[]}],"parameterNames":["enableRandomization","collectionFrequency"]}}]}}`
	json.Unmarshal([]byte(deviceDataRandomBoolGenerator), &ValidDeviceRandomBoolGenerator)
	json.Unmarshal([]byte(deviceDataRandomIntegerGenerator), &ValidDeviceRandomIntegerGenerator)
	json.Unmarshal([]byte(deviceDataRandomUnsignedIntegerGenerator), &ValidDeviceRandomUnsignedIntegerGenerator)
	json.Unmarshal([]byte(deviceDataRandomFloatGenerator), &ValidDeviceRandomFloatGenerator)
	json.Unmarshal([]byte(deviceDataRandomFloatGenerator), &DuplicateDeviceRandomFloatGenerator)
	json.Unmarshal([]byte(newValidDeviceData), &NewValidDevice)
}
